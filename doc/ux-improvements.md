# 用户体验优化建议与优先级（BiliNote / AiGenerateNote4video）

本文档面向产品与研发，用于把当前项目的用户体验优化点整理成可执行的迭代清单，并给出优先级与验收标准。

## 1. 目标与衡量指标

### 1.1 目标

- 降低新用户首次成功生成笔记的阻力
- 提升任务过程的可预期性与可控性（知道“在做什么/还要多久/失败怎么处理”）
- 提升历史检索与复用效率（找得到、筛得准、操作快）
- 提升多端一致性（跨设备可见的关键数据：任务、笔记、标签等）

### 1.2 建议指标（可用日志/埋点或简化为统计）

- Activation：进入首页后成功生成 1 条笔记的用户占比
- TTFN（Time to First Note）：从首次打开到生成成功的时间
- Success Rate：任务成功率（SUCCESS / 总任务）
- Failure Rate：FAILED 占比与 Top 失败原因
- Retention：7 日内再次生成/打开历史的用户占比

## 2. 当前用户路径（简化）

### 2.1 核心路径

1. 首页（输入链接/上传文件）创建任务
2. Workspace（查看状态、播放视频、查看/编辑笔记）
3. 历史页（搜索/筛选/排序、进入 Workspace、删除/复用）
4. 设置页（配置 Provider/Model、下载器等）

### 2.2 关键触点

- 新手首次配置 Provider/Model 的路径是否顺畅
- 任务执行的可视化程度（进度、阶段、失败原因、重试）
- 历史数据的“找回”成本（搜索/筛选/排序/标签）
- 多端一致性（手机/电脑看同一份标签与笔记）

## 3. 优先级方法（简化评分）

采用 “Impact × Frequency ÷ Effort” 的简化评估，用于排序：

- Impact（1-5）：对核心链路的体验提升程度
- Frequency（1-5）：用户触达频率（每次使用 vs 偶发）
- Effort（1-5）：实现成本与风险（越高越费时/越高风险）

备注：评分用于排序，不追求绝对精确；遇到明显的体验断点（如新手无法开始、失败不可解释）一律优先。

## 4. 优化清单与优先级

### P0：直接提升核心体验（优先做）

#### P0-1 任务进度可视化：阶段进度 + 失败原因 + 可操作动作

- 用户价值：用户明确知道任务在做什么、失败原因是什么、下一步怎么做
- 现状问题：
  - 轮询更新状态为主，失败原因未在 UI 明确呈现（用户容易卡住）
  - toast 只能瞬时提示，无法回看
- 建议方案：
  - Workspace 顶部固定展示：状态阶段（PARSING/DOWNLOADING/…）、错误 message（失败态）、动作按钮（重试/复制错误/去设置）
  - History 卡片也可显示简化状态与失败原因摘要（可选）
- 涉及模块：前端 Workspace、轮询逻辑、后端 task_status 返回字段
- 工作量：M（1-3 天，主要是 UI 与状态展示）
- 验收标准：
  - 失败任务在 Workspace 可直接看到失败原因 message
  - 失败态至少提供一个可执行动作：重试（可复用 provider/model）或去设置

#### P0-2 新手配置引导：无模型/无提供者时的可见引导

- 用户价值：减少“点了没反应/被 toast 打断”的挫败感，提高首次成功率
- 现状问题：
  - 未配置时依赖 toast + 跳转设置；缺少解释与一步式指导
- 建议方案：
  - 首页显示“未配置模型”卡片：说明原因 + 1 个按钮去设置；补充最小教程（如何填 base_url/api_key）
  - 显示后端连接状态（已存在 backend init check）
- 涉及模块：Home、Setting
- 工作量：S-M
- 验收标准：
  - 未配置时不再允许创建任务且页面内可见原因与入口
  - 用户从首页能明确完成“配置 -> 创建任务”

#### P0-3 空状态一致性：无任务/无结果/无筛选结果统一

- 用户价值：减少认知成本，提高可发现性
- 建议方案：
  - 统一空状态组件：标题 + 描述 + 主按钮（去创建/清空筛选/刷新）
  - History / Home 历史侧栏 / Workspace 无内容时保持一致风格
- 工作量：S
- 验收标准：
  - 3 个页面空状态风格一致且带明确下一步动作

### P1：效率提升（高频增强）

#### P1-1 搜索统一：标题/URL/标签一致，展示命中与高亮

- 用户价值：历史检索更快
- 现状问题：
  - Home 的历史侧栏使用 Fuse 模糊搜索；History 页是简单 contains，体验不一致
- 建议方案：
  - 提供统一的搜索策略（可先在前端实现）：标题 + URL + 标签
  - 显示命中条数；可选高亮（至少展示“无结果”与建议）
- 工作量：M
- 验收标准：
  - 同一个关键词在 Home 历史与 History 页得到一致结果

#### P1-2 批量操作：多选任务批量删除/打标签/导出

- 用户价值：管理大量任务更省时
- 建议方案：
  - History 列表支持多选（checkbox 或长按模式）
  - 批量操作：删除、打标签、导出（先支持 markdown）
- 工作量：M-L（导出类型越多越大）
- 验收标准：
  - 选中多条任务能一次完成删除或添加标签

#### P1-3 播放与笔记联动：时间戳点击跳转视频/同步高亮

- 用户价值：提升 Workspace 的“看视频做笔记”的沉浸感
- 建议方案：
  - 识别笔记中的时间戳格式（例如 00:12:34）并点击跳转播放器
  - 播放时可选跟随高亮对应段落（可后续迭代）
- 工作量：M
- 验收标准：
  - 点击时间戳播放器跳转到对应时间点

### P2：体验细节 + 可靠性

#### P2-1 错误提示可操作：统一错误展示支持按钮

- 用户价值：减少“看不懂/不知道怎么办”
- 建议方案：
  - 统一请求错误拦截里支持“错误 toast + 可执行 CTA（重试/去设置）”
  - 对常见错误（网络、鉴权、模型配置）做更友好的文案
- 工作量：S-M

#### P2-2 图片/列表 skeleton：提升感知速度

- 用户价值：列表看起来更快、更稳
- 建议方案：
  - 历史列表封面加载 skeleton 占位
  - 任务加载 skeleton（fetchTasks/初始化时）
- 工作量：S

#### P2-3 移动端优化：筛选折叠、标签编辑适配

- 用户价值：手机端可用性提升
- 建议方案：
  - History 的筛选区/排序区在移动端折叠为 Drawer
  - Workspace 的标签编辑区避免横向溢出
- 工作量：S-M

### P3：加分项（中长期）

#### P3-1 导出完善：Markdown/PDF/Word/Notion

- 用户价值：更强的内容交付与复用
- 工作量：L

#### P3-2 标签管理页：合并/重命名/统计

- 用户价值：当标签多时可控性更强
- 工作量：M

#### P3-3 性能：历史列表接口轻量化（列表与详情拆分）

- 用户价值：大数据量时提升加载速度与稳定性
- 现状风险：当前 `/tasks` 返回包含 transcript/markdown，历史越多越慢
- 建议方案：
  - `/tasks` 返回轻量字段（id、title、cover、status、created_at、tags）
  - 进入 workspace 再请求详情（markdown/transcript）
- 工作量：M-L（需兼容与前端改造）

## 5. 推荐迭代顺序（建议）

1. P0-1（进度/失败可视化）\n
2. P0-2（新手配置引导）\n
3. P0-3（空状态统一）\n
4. P1-1（搜索统一）\n
5. P1-3（时间戳联动）\n
6. P1-2（批量操作）\n
7. P2（细节）\n
8. P3（导出/性能/标签管理）\n

